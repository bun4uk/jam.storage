language: php
php:
  - 7.1
install: composer install
before_script:
  - cp app/config/parameters.yml.travis app/config/parameters.yml
  - composer install
  - php app/console doctrine:database:create --env=test
  - php app/console doctrine:schema:create --env=test
  - php app/console doctrine:fixtures:load -n --env=test
  - php app/console doctrine:schema:update --force
  - php app/console h:d:f:l -n
script:
  - phpunit -c app
  - php vendor/squizlabs/php_codesniffer/scripts/phpcs --standard=PSR2 src
  - php vendor/phpmd/phpmd/src/bin/phpmd src text cleancode
  - php vendor/sebastian/phpcpd/phpcpd src -n -q